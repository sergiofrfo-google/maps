<form id="mv-form" style="max-width:100%;margin:auto;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;">
  <h2 style="margin-bottom:16px;font-size:1.5rem;font-weight:700">Build your personalized city route</h2>

  <!-- Country -->
  <label style="display:block;margin:6px 0 4px;font-weight:600">Which country are you visiting? *</label>
  <select id="country" name="country" required
          style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;margin-bottom:12px">
    <option value="">-- Select a country --</option>
  </select>

  <!-- City -->
  <label style="display:block;margin:6px 0 4px;font-weight:600">Which city are you visiting? *</label>
  <select id="city" name="city" required
          style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;margin-bottom:12px">
    <option value="">-- Select a city --</option>
  </select>

  <!-- Other city manual input (hidden by default) -->
  <input type="text" id="city_other" name="city_other" placeholder="Enter your city"
         style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;margin-bottom:12px;display:none">

  <!-- Dates OR number of days -->
  <p style="margin:12px 0 6px;font-weight:600">Trip dates</p>
  <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-bottom:8px">
    <div>
      <label style="display:block;margin:0 0 4px;font-weight:600">Start date</label>
      <input type="date" id="start_date" name="start_date"
             style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px">
    </div>
    <div>
      <label style="display:block;margin:0 0 4px;font-weight:600">End date</label>
      <input type="date" id="end_date" name="end_date"
             style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px">
    </div>
  </div>

  <label style="display:flex;align-items:center;gap:8px;margin:6px 0 10px;">
    <input type="checkbox" id="no_dates" name="no_dates">
    I don’t have specific dates
  </label>

  <div>
    <label style="display:block;margin:6px 0 4px;font-weight:600">How many days will you stay?</label>
    <input type="number" id="stay_days" name="stay_days" min="1" max="7" placeholder="e.g., 3"
           style="width:140px;padding:10px;border:1px solid #d1d5db;border-radius:8px">
    <small id="stay_days_help" style="display:block;color:#6b7280;margin-top:4px">
      If dates are set, this will be calculated automatically (max 7 days).
    </small>
  </div>

  <p id="dates-error" style="color:red;font-size:0.9rem;margin:8px 0 0;display:none"></p>

  <!-- Interests -->
  <p style="margin:12px 0 6px;font-weight:600">Which types of places are you most interested in?</p>
  <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;margin-bottom:12px">
    <label><input type="checkbox" name="categories" value="Museums"> Museums</label>
    <label><input type="checkbox" name="categories" value="Food/Restaurants"> Food/Restaurants</label>
    <label><input type="checkbox" name="categories" value="Local markets"> Local markets</label>
    <label><input type="checkbox" name="categories" value="Instagram spots"> Instagram spots</label>
    <label><input type="checkbox" name="categories" value="Parks/Nature"> Parks/Nature</label>
    <label><input type="checkbox" name="categories" value="Historical sites"> Historical sites</label>
    <label><input type="checkbox" name="categories" value="Nightlife"> Nightlife</label>
    <label><input type="checkbox" name="categories" value="Shopping"> Shopping</label>
    <label title="Requires fixed dates"><input type="checkbox" id="cat_festivals" name="categories" value="Festivals/Events"> Festivals/Events</label>
  </div>

  <!-- Tip Focus (choose the kinds of tips you want to see) -->
  <p style="margin:12px 0 6px;font-weight:600">Tip focus (optional)</p>
  <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;margin-bottom:12px">
    <label><input type="checkbox" name="tip_focus" value="transportation"> Transportation</label>
    <label><input type="checkbox" name="tip_focus" value="security"> Security</label>
    <label><input type="checkbox" name="tip_focus" value="saving"> Saving</label>
    <label><input type="checkbox" name="tip_focus" value="weather_clothing"> Weather/Clothing</label>
    <label><input type="checkbox" name="tip_focus" value="cultural"> Cultural</label>
    <label><input type="checkbox" name="tip_focus" value="local_hacks"> Local hacks</label>
  </div>

  <!-- Getting around -->
  <p style="margin:12px 0 6px;font-weight:600">How would you like to get around? (choose all that apply)</p>
  <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-bottom:12px">
    <label><input type="checkbox" name="mobility" value="walking" checked> Walking</label>
    <label><input type="checkbox" name="mobility" value="public_transport"> Public transport</label>
    <label><input type="checkbox" name="mobility" value="ride_hailing"> Ride-hailing (Uber, taxi)</label>
    <label><input type="checkbox" name="mobility" value="bike"> Bicycle</label>
    <label><input type="checkbox" name="mobility" value="car"> Car rental</label>
  </div>

  <!-- Pace (1–5) -->
  <p style="margin:12px 0 6px;font-weight:600">Preferred pace (1–5)</p>
  <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
    <span style="font-size:0.9rem;color:#6b7280">Very relaxed</span>
    <input type="range" name="pace" id="pace" min="1" max="5" value="3" step="1" style="flex:1">
    <span style="font-size:0.9rem;color:#6b7280">Very intense</span>
  </div>

  <!-- Additional requests -->
  <label style="display:block;margin:6px 0 4px;font-weight:600">Additional requests (optional)</label>
  <textarea name="extra_requests" maxlength="200" placeholder="e.g., Architecture focus; traveling with a cat; etc."
            style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;margin-bottom:12px;height:60px"></textarea>

  <!-- Budget -->
  <p style="margin:12px 0 6px;font-weight:600">Approximate budget per day</p>
  <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
    <input type="number" name="budget_value" min="0" step="1" placeholder="e.g., 50"
           style="width:100px;padding:10px;border:1px solid #d1d5db;border-radius:8px">
    <select name="budget_currency"
            style="padding:10px;border:1px solid #d1d5db;border-radius:8px">
      <option value="USD">$ USD</option>
      <option value="EUR">€ EUR</option>
      <option value="COP">$ COP</option>
      <option value="BRL">R$ BRL</option>
    </select>
  </div>

  <!-- Delivery -->
  <label style="display:block;margin:12px 0 4px;font-weight:600">Email to receive your map (optional)</label>
  <input type="email" name="email" placeholder="you@example.com"
         style="width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;margin-bottom:12px">

  <button type="submit"
          style="padding:12px 18px;border:0;border-radius:10px;background:#111827;color:#fff;font-weight:600;cursor:pointer">
    Generate my route
  </button>
</form>

<p id="mv-status" style="margin-top:12px;color:#374151"></p>

<!-- Lightweight step progress (does not slow the app) -->
<div id="mv-progress" style="display:none;max-width:100%;margin:8px auto 0">
  <div id="mv-progress-label" style="font-size:12px;color:#6b7280;margin-bottom:6px">Preparing…</div>
  <div style="height:8px;background:#e5e7eb;border-radius:9999px;overflow:hidden">
    <div id="mv-progress-bar" style="height:8px;width:0%;background:#6366f1;transition:width .25s ease"></div>
  </div>
</div>

<!-- Skeleton shown while we wait for first response -->
<div id="mv-skeleton" style="display:none;max-width:100%;margin:16px auto;font-family:Inter,Arial,sans-serif">
  <div style="height:14px;width:30%;background:#eee;border-radius:6px;margin:10px 0;animation:pulse 1.2s infinite"></div>
  <div style="height:10px;width:80%;background:#eee;border-radius:6px;margin:8px 0;animation:pulse 1.2s infinite"></div>
  <div style="height:10px;width:70%;background:#eee;border-radius:6px;margin:8px 0;animation:pulse 1.2s infinite"></div>
  <div style="height:10px;width:60%;background:#eee;border-radius:6px;margin:8px 0;animation:pulse 1.2s infinite"></div>
  <style>
    @keyframes pulse { 0%{opacity:.6} 50%{opacity:1} 100%{opacity:.6} }
  </style>
</div>

<!-- Itinerary container (hidden by default) -->
<div id="itinerary" style="display:none;max-width:100%;margin:auto;font-family:Inter,Arial,sans-serif;"></div>

